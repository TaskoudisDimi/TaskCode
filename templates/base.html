<!DOCTYPE html>
<html lang="{{ session.get('language', 'en') }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}{{ company_details.name | default('Task-Code') }}{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="bg-white text-gray-900">
  <nav class="bg-white shadow sticky top-0 z-50" style="height: 64px;">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <a href="{{ url_for('main.index') }}" class="text-2xl font-bold font-orbitron">
        {% if images.logo and images.logo|length > 0 %}
          <img src="{{ images.logo[0].image_url }}" alt="{{ images.logo[0].alt_text }}" class="h-11">
        {% else %}
          <img src="{{ url_for('static', filename='imgs/logos/logo4.png') }}" alt="{{ company_details.name | default('Task-Code') }} Logo" class="h-11">
        {% endif %}
      </a>
      <div class="space-x-6 flex items-center">
        <div class="relative dropdown">
          <a href="#" class="text-gray-900 hover:text-teal-600 font-orbitron flex items-center">
            {{ translations.services_title | default('Services') }}
            <i class="fas fa-chevron-down ml-1 text-sm"></i>
          </a>
          <div class="dropdown-menu">
            <a href="{{ url_for('main.sites_eshops_wms') }}">{{ translations.sites_eshop_wms_title | default('Create Sites/E-shop/WMS') }}</a>
            <a href="{{ url_for('main.logos') }}">{{ translations.logos_title | default('Create Logos and Social Media') }}</a>
            <a href="{{ url_for('main.AI') }}">{{ translations.ai_software_title | default('Create Software for Task Automation with AI') }}</a>
            <a href="{{ url_for('main.custom_software') }}">{{ translations.custom_software_title | default('Custom Software') }}</a>
          </div>
        </div>
        <div class="relative dropdown">
          <a href="#solutions" class="text-gray-900 hover:text-teal-600 font-orbitron flex items-center">
            {{ translations.solutions_title | default('Solutions') }}
            <i class="fas fa-chevron-down ml-1 text-sm"></i>
          </a>
          <div class="dropdown-menu">
            <a href="{{ url_for('main.eCommerce_solution') }}">{{ translations.ecommerce_automation_title | default('eCommerce Solution') }}</a>
            <a href="{{ url_for('main.Brand_Identity_Digital_Assets') }}">{{ translations.brand_identity_title | default('Brand Identity & Digital Assets') }}</a>
            <a href="{{ url_for('main.Dynamic_Web_Portals') }}">{{ translations.dynamic_web_portals_title | default('Dynamic Web Portals') }}</a>            
            <a href="{{ url_for('main.Smart_Inventory_Management') }}">{{ translations.smart_inventory_title | default('Smart Inventory Management') }}</a>        
          </div>
        </div>
        <a href="{{ url_for('main.prices') }}" class="text-gray-900 hover:text-teal-600 font-orbitron">{{ translations.pricing_title | default('Prices') }}</a>
        <a href="{{ url_for('main.about') }}" class="text-gray-900 hover:text-teal-600 font-orbitron">{{ translations.about_title | default('About Us') }}</a>
        <select id="language-select" class="bg-gray-200 text-gray-900 p-1 rounded-md" onchange="changeLanguage(this.value)">
          <option value="en" {% if session.get('language') == 'en' %}selected{% endif %}>English</option>
          <option value="el" {% if session.get('language') == 'el' %}selected{% endif %}>Greek</option>
        </select>
      </div>
    </div>
  </nav>

  {% block content %}{% endblock %}

  {% if request.endpoint == 'main.index' or request.endpoint == 'main.about' %}
  <section id="contact" class="py-20 bg-gray-100 relative overflow-hidden">
    <div class="container mx-auto px-4 relative z-10">
      <h2 class="text-5xl md:text-6xl font-orbitron font-bold text-gray-900 text-center mb-12 animate-slide-in">
        {{ translations.contact_title | default('Contact') }}
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <div class="bg-white p-8 rounded-lg shadow-xl border border-teal-300 flex items-center">
          <div class="w-full h-full bg-gray-100 rounded-lg border-2 border-teal-300 overflow-hidden">
            <iframe 
             src="https://www.google.com/maps/embed/v1/place?key={{ company_details.maps_api_key }}&q={{ (company_details.address + ', ' + company_details.city + ', ' + company_details.country) | urlencode }}"
              width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
            </iframe>
          </div>
        </div>
        <div class="bg-white p-8 rounded-lg shadow-xl border border-teal-300">
          <h3 class="text-2xl font-orbitron text-gray-900 mb-6 text-center">{{ translations.company_info_title | default('Company Information') }}</h3>
          <div class="space-y-4">
            <p class="text-gray-700 font-poppins flex items-center">
              <span class="mr-2">üìç</span> 
              **{{ translations.address_label | default('Address') }}:** {{ company_details.address | default('123 Innovation Lane') }}, 
              {{ company_details.city | default('Tech City') }}, 
              {{ company_details.postal_code | default('TC 45678') }}, 
              {{ company_details.country | default('Country') }}
            </p>
            <p class="text-gray-700 font-poppins flex items-center">
              <span class="mr-2">üìû</span> 
              **{{ translations.telephone_label | default('Telephone') }}:** {{ company_details.phone | default('+1-234-567-8900') }}
            </p>
            <p class="text-gray-700 font-poppins flex items-center">
              <span class="mr-2">‚úâÔ∏è</span> 
              **{{ translations.email_label | default('Email') }}:** <a href="mailto:{{ company_details.email | default('info@task-code.com') }}">{{ company_details.email | default('info@task-code.com') }}</a>
            </p>
            <p class="text-gray-700 font-poppins flex items-center">
              <span class="mr-2">üåê</span> 
              **{{ translations.website_label | default('Website') }}:** <a href="{{ company_details.website | default('#') }}" target="_blank">{{ company_details.website | default('https://www.task-code.com') }}</a>
            </p>
            <p class="text-gray-700 font-poppins flex items-center">
              <span class="mr-2">‚è∞</span> 
              **{{ translations.hours_label | default('Hours') }}:** {{ company_details.hours | default('Mon-Fri, 9:00 AM - 6:00 PM (EEST)') }}
            </p>
            <h4 class="text-lg font-orbitron text-gray-900 mb-4 mt-6 text-center">{{ translations.follow_us | default('Follow Us') }}</h4>
            <div class="flex justify-center space-x-6">
              <a href="{{ company_details.twitter_url | default('#') }}" class="text-teal-600 hover:text-teal-400 transition-colors duration-300 flex items-center"><i class="fab fa-x-twitter mr-1"></i> Twitter</a>
              <a href="{{ company_details.linkedin_url | default('#') }}" class="text-teal-600 hover:text-teal-400 transition-colors duration-300 flex items-center"><i class="fab fa-linkedin-in mr-1"></i> LinkedIn</a>
              <a href="{{ company_details.facebook_url | default('#') }}" class="text-teal-600 hover:text-teal-400 transition-colors duration-300 flex items-center"><i class="fab fa-facebook-f mr-1"></i> Facebook</a>
            </div>
          </div>
          <h3 class="text-2xl font-orbitron text-gray-900 mt-8 mb-4 text-center">{{ translations.newsletter_signup | default('Newsletter Signup') }}</h3>
          <form action="{{ url_for('main.newsletter') }}" method="POST" class="max-w-md mx-auto space-y-4">
            <button type="submit" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-xl font-orbitron transition-all duration-300">
              {{ translations.form_submit | default('Subscribe') }}
            </button>
            <p class="text-gray-500 font-poppins text-center mt-2">{{ translations.newsletter_description | default('Keep in touch with our latest news') }}</p>
          </form>
        </div>
      </div>
    </div>
  </section>
  {% else %}
    <section id="contact" class="py-16 bg-white">
      <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-12">{{ translations.contact_title | default('Contact') }}</h2>
        <div class="grid grid-cols-1 md:grid-cols-1 gap-8">
          <div class="bg-white p-8 rounded-lg shadow-xl border border-teal-300">
            <h3 class="text-2xl font-orbitron text-gray-900 mb-6 text-center">{{ translations.send_message | default('Send Us a Message') }}</h3>

            {% if request.method == 'POST' %}
              <div class="text-center text-teal-600 mb-4 font-poppins">
                ‚úÖ {{ translations.message_sent | default('Message sent successfully! We\'ll get back to you soon.') }}
              </div>
            {% endif %}

            <form method="POST" action="{{ url_for('main.contact') }}" class="max-w-lg mx-auto space-y-6">
              <div>
                <label for="name" class="block text-gray-900 mb-2 font-poppins">{{ translations.form_name | default('Name') }}</label>
                <input type="text" name="name" id="name"
                       class="w-full p-3 rounded-lg bg-gray-200 text-gray-900 border border-gray-300
                              focus:outline-none focus:ring-2 focus:ring-teal-600 transition-all duration-300"
                       required>
              </div>
              <div>
                <label for="email" class="block text-gray-900 mb-2 font-poppins">{{ translations.form_email | default('Email') }}</label>
                <input type="email" name="email" id="email"
                       class="w-full p-3 rounded-lg bg-gray-200 text-gray-900 border border-gray-300
                              focus:outline-none focus:ring-2 focus:ring-teal-600 transition-all duration-300"
                       required>
              </div>
              <div>
                <label for="subject" class="block text-gray-900 mb-2 font-poppins">{{ translations.form_subject | default('Subject') }}</label>
                <input type="text" name="subject" id="subject"
                       class="w-full p-3 rounded-lg bg-gray-200 text-gray-900 border border-gray-300
                              focus:outline-none focus:ring-2 focus:ring-teal-600 transition-all duration-300"
                       required>
              </div>
              <div>
                <label for="message" class="block text-gray-900 mb-2 font-poppins">{{ translations.form_message | default('Message') }}</label>
                <textarea name="message" id="message" rows="6"
                          class="w-full p-3 rounded-lg bg-gray-200 text-gray-900 border border-gray-300
                                 focus:outline-none focus:ring-2 focus:ring-teal-600 transition-all duration-300"
                          required></textarea>
              </div>
              <button type="submit"
                      class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-6 rounded-xl font-orbitron pulse-btn transition-all duration-300">
                {{ translations.form_submit | default('Submit') }}
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  {% endif %}

  <!-- <div id="chatbot-trigger" class="fixed bottom-4 right-4 z-50 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white bg-gray-600 rounded-full p-2 hover:bg-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16h6M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z" />
    </svg>
  </div>
  <div id="chatbot" class="fixed bottom-4 right-20 w-80 bg-gray-800 text-white rounded-lg shadow-lg p-4 hidden z-40">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-orbitron">{{ translations.chat_title | default('Chat with Us') }}</h3>
      <button id="chatbot-close" class="text-white hover:text-gray-400">√ó</button>
    </div>
    <div id="chat-messages" class="h-64 overflow-y-auto mb-4">
      {% for message in session.get('chat_messages', []) %}
        <div class="mb-2 {{ 'text-right' if message.from == 'user' else 'text-left' }}">
          <p class="inline-block p-2 rounded-lg {{ 'bg-gray-700' if message.from == 'user' else 'bg-teal-600' }}">{{ message.text }}</p>
        </div>
      {% endfor %}
    </div>
    <form id="chat-form" action="{{ url_for('main.submit_chat') }}" method="POST" class="flex">
      <input type="text" id="chat-input" name="chat_input" class="w-full px-2 py-1 bg-gray-700 text-white rounded-l-md focus:outline-none" placeholder="{{ translations.chat_placeholder | default('Type your message...') }}">
      <button type="submit" class="bg-teal-600 text-white px-4 py-1 rounded-r-md hover:bg-teal-700">{{ translations.form_submit | default('Send') }}</button>
    </form>
  </div> -->

  <footer class="bg-gray-200 py-12 relative overflow-hidden">
    <div class="container mx-auto px-4 text-center relative z-10">
      <div class="mb-8">
        <h3 class="text-2xl font-orbitron text-gray-900 mb-4">{{ company_details.name | default('Task-Code') }}</h3>
        <p class="text-lg text-teal-600">{{ translations.tagline | default('The Smart Business Enabler') }}</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
        <div>
          <h4 class="text-lg font-orbitron text-gray-900 mb-4">{{ translations.company_title | default('Company') }}</h4>
          <ul class="space-y-2 text-gray-700 font-poppins">
            <li><a href="{{ url_for('main.index') }}" class="hover:text-teal-600">{{ translations.home_title | default('Home') }}</a></li>
            <li><a href="{{ url_for('main.prices') }}" class="hover:text-teal-600">{{ translations.services_title | default('Services') }}</a></li>
            <li><a href="{{ url_for('main.about') }}" class="hover:text-teal-600">{{ translations.about_title | default('About Us') }}</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-orbitron text-gray-900 mb-4">{{ translations.useful_title | default('Useful') }}</h4>
          <ul class="space-y-2 text-gray-700 font-poppins">
            <li><a href="#" class="hover:text-teal-600">{{ translations.privacy_policy | default('Privacy Policy') }}</a></li>
            <li><a href="#" class="hover:text-teal-600">{{ translations.terms_of_use | default('Terms of Use') }}</a></li>
            <li><a href="#" class="hover:text-teal-600">{{ translations.cookie_declaration | default('Cookie Declaration') }}</a></li>
            <li><a href="#" class="hover:text-teal-600">{{ translations.service_management_policy | default('Service Management System Policy') }}</a></li>            
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-orbitron text-gray-900 mb-4">{{ translations.questions_title | default('Any Questions?') }}</h4>
          <p class="text-gray-700 font-poppins mb-4">{{ translations.questions_description | default('Have a question? Just drop a line.') }}</p>
          <a href="{{ url_for('main.contact') }}" class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-xl font-orbitron transition-all duration-300">{{ translations.contact_us | default('Contact Us') }}</a>
          <div class="flex justify-center space-x-4 mt-4">
            <a href="{{ company_details.linkedin_url | default('#') }}" class="text-teal-600 hover:text-teal-500"><i class="fab fa-linkedin-in"></i></a>
            <a href="{{ company_details.twitter_url | default('#') }}" class="text-teal-600 hover:text-teal-500"><i class="fab fa-x-twitter"></i></a>
            <a href="{{ company_details.youtube_url | default('#') }}" class="text-teal-600 hover:text-teal-500"><i class="fab fa-youtube"></i></a>
            <a href="{{ company_details.facebook_url | default('#') }}" class="text-teal-600 hover:text-teal-500"><i class="fab fa-facebook-f"></i></a>
          </div>
        </div>
      </div>
      <p class="text-gray-500 font-poppins">¬© 2025 {{ company_details.name | default('Task-Code') }}. {{ translations.all_rights_reserved | default('All rights reserved.') }}</p>
    </div>
  </footer>
  <button id="scrollToTopBtn" 
          class="fixed bottom-6 right-6 z-50 p-4 bg-teal-600 text-white rounded-full shadow-lg 
                 hover:bg-teal-700 transition-all duration-300 opacity-0 invisible" 
          aria-label="{{ translations.scroll_to_top | default('Scroll to Top') }}">
    <i class="fas fa-arrow-up text-xl"></i>
  </button>
  <script>
    function changeLanguage(lang) {
      console.log("Changing language to:", lang);
      fetch(`/set_language/${lang}`, { method: 'POST' })
        .then(response => {
          if (response.ok) {
            window.location.reload();
          } else {
            console.error("Failed to change language:", response.status);
          }
        })
        .catch(error => {
          console.error("Error during language change:", error);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const scrollToTopBtn = document.getElementById('scrollToTopBtn');
      const rootElement = document.documentElement; // Used for smooth scrolling

      // Function to show/hide the button
      function handleScroll() {
        // Show button if user has scrolled more than 100 pixels (a threshold)
        if (rootElement.scrollTop > 100) {
          scrollToTopBtn.classList.remove('opacity-0', 'invisible');
          scrollToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          scrollToTopBtn.classList.remove('opacity-100', 'visible');
          scrollToTopBtn.classList.add('opacity-0', 'invisible');
        }
      }

      // Function to scroll smoothly back to the top
      function scrollToTop() {
        rootElement.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }

      // Attach event listeners
      window.addEventListener('scroll', handleScroll);
      scrollToTopBtn.addEventListener('click', scrollToTop);
    });

    // document.addEventListener('DOMContentLoaded', () => {
    //   const chatbotTrigger = document.getElementById('chatbot-trigger');
    //   const chatbot = document.getElementById('chatbot');
    //   const chatbotClose = document.getElementById('chatbot-close');

    //   chatbotTrigger.addEventListener('click', () => {
    //     chatbot.classList.toggle('hidden');
    //   });

    //   chatbotClose.addEventListener('click', () => {
    //     chatbot.classList.add('hidden');
    //   });
    // });
  </script>
</body>
</html>